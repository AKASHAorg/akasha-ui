{
  "name": "profile-avatar-button",
  "type": "registry:ui",
  "registryDependencies": [
    "https://akasha-ui.pages.dev/r/styles/default/profile-avatar.json",
    "https://akasha-ui.pages.dev/r/styles/default/stack.json",
    "https://akasha-ui.pages.dev/r/styles/default/icon-container.json",
    "https://akasha-ui.pages.dev/r/styles/default/typography.json"
  ],
  "files": [
    {
      "path": "ui/profile-avatar-button.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { z } from \"zod\";\n\nimport { cn } from \"@/lib/utils\";\nimport { DidKey } from \"@/registry/default/custom-icons/did-key\";\nimport { Ethereum } from \"@/registry/default/custom-icons/ethereum\";\nimport { NoEth } from \"@/registry/default/custom-icons/no-eth\";\nimport { Solana } from \"@/registry/default/custom-icons/solana\";\nimport { IconContainer } from \"@/registry/default/ui/icon-container\";\nimport {\n  ProfileAvatarFallback,\n  ProfileAvatarImage,\n  ProfileAvatar as ProfileAvatarRoot,\n} from \"@/registry/default/ui/profile-avatar\";\nimport { Stack } from \"@/registry/default/ui/stack\";\nimport { Typography } from \"@/registry/default/ui/typography\";\n\ntype ProfileAvatarButtonSize = \"sm\" | \"lg\" | \"md\";\n\nconst DID_SCHEMA = z\n  .string()\n  .min(5)\n  .refine((x: string) => x.startsWith(\"did:\"));\n\nconst ProfileAvatarButtonContext = React.createContext<{\n  profileDID: string;\n  size: ProfileAvatarButtonSize;\n  nsfw: boolean;\n  nsfwLabel: string;\n  metadata: React.ReactNode;\n  vertical: boolean;\n} | null>(null);\n\nconst useProfileAvatarButtonContext = () => {\n  const context = React.useContext(ProfileAvatarButtonContext);\n  if (!context) {\n    throw new Error(\n      \"`useProfileAvatarButtonContext` must be used within `ProfileAvatarButton`\"\n    );\n  }\n  return context;\n};\n\nconst truncateMiddle = (str: string, startChars = 6, endChars = 4) =>\n  str\n    ? `${str.substring(0, startChars)}...${str.substring(\n        str.length - endChars\n      )}`\n    : \"\";\n\nconst truncateDid = (didKey: string, type = \"eth\") => {\n  if (!didKey) return \"\";\n  if (didKey.length <= 12) return didKey;\n  const address = didKey.split(\":\").pop() || \"\";\n  return truncateMiddle(\n    address,\n    type === \"eth\" || type === \"solana\" ? 6 : 5,\n    6\n  );\n};\n\nconst getDidFieldIconType = (didKey: string) => {\n  if (!didKey) return \"noDid\";\n  return didKey.includes(\"eip155\")\n    ? \"ethereum\"\n    : didKey.includes(\"solana\")\n      ? \"solana\"\n      : \"did\";\n};\n\nconst ProfileAvatarButton = ({\n  profileDID = \"\",\n  nsfw = false,\n  nsfwLabel = \"\",\n  metadata,\n  children,\n  size = \"md\",\n  vertical = false,\n  className,\n  ...props\n}: {\n  profileDID?: string;\n  nsfw?: boolean;\n  nsfwLabel?: string;\n  metadata?: React.ReactNode;\n} & (\n  | { size?: Exclude<ProfileAvatarButtonSize, \"lg\">; vertical?: false }\n  | {\n      size?: \"lg\";\n      vertical?: true;\n    }\n) &\n  React.ComponentProps<\"div\">) => {\n  return (\n    <ProfileAvatarButtonContext.Provider\n      value={{ profileDID, nsfw, nsfwLabel, size, metadata, vertical }}\n    >\n      <div\n        data-slot=\"profile-avatar-button\"\n        className={cn(\n          {\n            \"grid grid-cols-[0.5fr_1fr] grid-rows-2\":\n              size === \"lg\" && !vertical,\n            \"grid grid-cols-[0fr_1fr] grid-rows-2\": size === \"md\",\n            \"flex items-center flex-col\": size === \"lg\" && vertical,\n            \"flex items-center\": size === \"sm\",\n          },\n          \"gap-1\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    </ProfileAvatarButtonContext.Provider>\n  );\n};\n\nconst sizeMap = { lg: \"xl\", md: \"lg\", sm: \"xs\" } as const;\n\nconst ProfileAvatar = ({\n  className,\n  ...props\n}: Omit<React.ComponentProps<typeof ProfileAvatarRoot>, \"size\">) => {\n  const { profileDID, size, nsfw, vertical } = useProfileAvatarButtonContext();\n  return (\n    <ProfileAvatarRoot\n      data-slot=\"profile-avatar\"\n      profileDID={profileDID}\n      size={sizeMap[size]}\n      nsfw={nsfw}\n      className={cn(\n        {\n          \"self-center row-span-2\":\n            size === \"md\" || (size === \"lg\" && !vertical),\n        },\n        className\n      )}\n      {...props}\n    />\n  );\n};\n\nconst ProfileName = ({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\">) => {\n  const { size, vertical, nsfw, nsfwLabel, metadata } =\n    useProfileAvatarButtonContext();\n  return (\n    size && (\n      <Stack\n        data-slot=\"profile-name\"\n        direction=\"row\"\n        alignItems=\"center\"\n        spacing={1}\n        className={cn({\n          \"self-end\": size === \"lg\" && !vertical,\n          \"justify-self-start\": size === \"md\" || (size === \"lg\" && !vertical),\n        })}\n        {...props}\n      >\n        <Typography\n          variant={size === \"sm\" ? \"xs\" : \"sm\"}\n          bold={size !== \"sm\"}\n          className={className}\n        >\n          {children}\n        </Typography>\n        {nsfw && size !== \"sm\" && (\n          <Typography\n            data-slot=\"nsfw-label\"\n            variant=\"xs\"\n            bold={true}\n            className=\"text-destructive\"\n          >\n            {nsfwLabel}\n          </Typography>\n        )}\n        {metadata}\n      </Stack>\n    )\n  );\n};\n\nconst didNetworkIconMapping = {\n  ethereum: <Ethereum />,\n  solana: <Solana />,\n  did: <DidKey />,\n  noDid: <NoEth />,\n};\n\nconst ProfileDidField = ({ className }: React.ComponentProps<\"div\">) => {\n  const { profileDID, size, vertical } = useProfileAvatarButtonContext();\n  const networkType = getDidFieldIconType(profileDID);\n  const { success: isValidDID } = DID_SCHEMA.safeParse(profileDID);\n\n  return (\n    <Stack\n      data-slot=\"profile-did-field\"\n      direction=\"row\"\n      spacing={1.5}\n      alignItems=\"center\"\n      className={cn(\n        \"h-4\",\n        {\n          \"col-start-2\": size === \"md\" || (size === \"lg\" && !vertical),\n        },\n        className\n      )}\n    >\n      <IconContainer size=\"xs\" className=\"text-secondary-foreground\">\n        {isValidDID ? didNetworkIconMapping[networkType] : <NoEth />}\n      </IconContainer>\n      <Typography variant=\"xs\" className=\"text-secondary-foreground\">\n        {isValidDID ? truncateDid(profileDID, networkType) : \"Invalid DID\"}\n      </Typography>\n    </Stack>\n  );\n};\n\nexport {\n  ProfileAvatarButton,\n  ProfileAvatar,\n  ProfileAvatarFallback,\n  ProfileAvatarImage,\n  ProfileName,\n  ProfileDidField,\n};\n",
      "type": "registry:ui",
      "target": ""
    }
  ]
}